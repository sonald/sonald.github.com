<!DOCTYPE HTML>
<html>
<head>
  <meta charset="utf-8">
  
  <title>Seite 4 | Working funny way</title>
  <meta name="author" content="Sian Cao">
  
  
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

  
  <meta property="og:site_name" content="Working funny way"/>

  
    <meta property="og:image" content="undefined"/>
  

  <link href="/favicon.png" rel="icon">
  <link rel="alternate" href="/atom.xml" title="Working funny way" type="application/atom+xml">
  <link rel="stylesheet" href="/css/style.css" media="screen" type="text/css">
  <!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
  
<script>
	(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
		(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
			m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

	ga('create', 'UA-40340886-1', 'auto');
	ga('send', 'pageview');

</script>


</head>


<body>
  <header id="header" class="inner"><div class="alignleft">
    <img style="margin-right: 30px"
        src="https://www.gravatar.com/avatar/5965dd93d497bef6e9a0b4029b0e023d">
    </img>
</div>
<div class="alignleft">
  <h1><a href="/">Working funny way</a></h1>
  <h2><a href="/">just some random thoughts and coding related</a></h2>
</div>
<nav id="main-nav" class="alignright">
  <ul>
    
      <li><a href="/">Home</a></li>
    
      <li><a href="/archives">Archives</a></li>
    
      <li><a href="http://sonald.github.io/Resume">Resume</a></li>
    
      <li><a href="http://github.com/sonald">Github</a></li>
    
      <li><a href="/about">About</a></li>
    
  </ul>
  <div class="clearfix"></div>
</nav>
<div class="clearfix"></div>
</header>
  <div id="content" class="inner">
    <div id="main-col" class="alignleft"><div id="wrapper">
  <article class="post">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
        <time datetime="2012-05-16T05:25:00.000Z"><a href="/2012/05/16/2012-05-16-tips-for-improving-our-learning-process/">2012-05-16</a></time>
      
      
  
    <h1 class="title"><a href="/2012/05/16/2012-05-16-tips-for-improving-our-learning-process/">tips for improving our learning process</a></h1>
  

    </header>
    <div class="entry">
      
        <p><a href="https://plus.google.com/115133653231679625609" target="_blank" rel="external">Addy Osmani</a> shared some tips about<br>improving learning process, and I’d like to share with you all.</p>
<p>he is author of some great free books about javascript, such as<br><a href="http://addyosmani.com/resources/essentialjsdesignpatterns/book/" target="_blank" rel="external">Essential JS Design Patterns</a>.</p>
<p><br></p>
<div class="row-fluid"><br><div class="span6"><br>* Be self-aware: how do you learn best? Do you learn best from documentation,<br>  step-by-step tutorials, hands-on approaches or with a visual aid? Do your<br>  best to modify how you learn to suit your personal preferences. If you can’t<br>  find a knowledge resource in your format of preference, don’t be afraid to<br>  ask if someone would be willing to do it in another form. Perhaps an author<br>  of an existing resource wouldn’t mind doing a video or podcast on the same<br>  topic, especially if the material is still fresh in their minds.<br></div>

<div class="span6"><br><em> Set learning goals: what are you hoping to get out of learning something new?<br>  Is there a particular weakness you’re trying to address? Define upfront what<br>  it is you’re hoping to do better or be better at by the time you’ve completed<br>  your experience. If this means setting learning “milestones” on a personal<br>  GitHub project, go for it.<br></em></div><br></div><br><br><br><br><div class="row-fluid"><br><div class="span6">
 Practice: Once you’ve completed a learning experience, create opportunities<br>  to apply what you’ve learned asap. This will help refine your abilities. Some<br>  developers try to find opportunities at work where they can apply what<br>  they’ve learned whilst others create sample projects or tutorials using what<br>  they’ve learned to share with the community.<br></div>

<div class="span6"><br><em> Do knowledge transfers: If possible, see if you can work with someone with a<br>  skill you wish to develop further. Maybe you can offer to teach them more<br>  about an area they’re weak in in return (e.g “I’ll teach you about LESS if<br>  you teach me about Node”)<br></em></div><br></div><br><br><br><br><br><div class="row-fluid"><br><div class="span6">
 Don’t be afraid to ask questions: The most knowledgable people are often<br>  those who weren’t afraid to say “I don’t understand this. Can you explain?”.<br>  Asking questions is an easy way to gain more knowledge. It can be uneasy at<br>  first, but it’s always useful to get other peoples perspectives on topics.<br></div>

<div class="span6"><br><em> Experiment: Try out new things, even if you find them uncomfortable at first.<br>  It’s amazing how much we can learn from our mistakes as well as our<br>  successes.<br></em></div><br></div><br><br><br><br><br><div class="row-fluid"><br><div class="span6">
 Evaluate: We often play around with code and create new things without ever<br>  really stopping to evaluate just how much we’ve really learned. Remember to<br>  make time out to ask yourself “What did I learn from this?”, “What worked?”<br>  and “What didn’t work?”<br></div><br><div class="span6"><br></div><br></div>

      
    </div>
    <footer>
      
        
        
      
      <div class="clearfix"></div>
    </footer>
  </div>
</article>




  <article class="post">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
        <time datetime="2012-05-07T10:46:00.000Z"><a href="/2012/05/07/2012-05-07-a-simple-du-clone-with-nodejs-asynchronously/">2012-05-07</a></time>
      
      
  
    <h1 class="title"><a href="/2012/05/07/2012-05-07-a-simple-du-clone-with-nodejs-asynchronously/">a simple du clone with nodejs asynchronously</a></h1>
  

    </header>
    <div class="entry">
      
        <p>最近一直在关注<a href="http://nodejs.org/" target="_blank" rel="external">Node.js</a>，感觉与之前一直用的编程模型有很大的区别。Node.js完全基于异步回调和事件机制的体系，<br>给如何更好的编写JS带来一些挑战，我也是刚刚进入web编程这个领域，所以有许多概念需要再清晰和明确。昨天尝试用<br>Node.js写了一个简单的du，一个同步版本，一个异步版本。</p>
<p>同步的比较简单，非常直觉，大家都很熟悉：<br><figure class="highlight js"><figcaption><span>du-sync</span><a href="/downloads/code/du.js">view raw</a></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/usr/bin/env node</span></span><br><span class="line"><span class="comment">// du clone</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> fs = <span class="built_in">require</span>(<span class="string">'fs'</span>),</span><br><span class="line">    util = <span class="built_in">require</span>(<span class="string">'util'</span>),</span><br><span class="line">    argv = <span class="built_in">require</span>(<span class="string">'optimist'</span>)</span><br><span class="line">           .usage(<span class="string">'Usage: $0 [OPTION]... [PATH]...\n'</span> +</span><br><span class="line">                  <span class="string">'\t-h, --human \n'</span> +</span><br><span class="line">                  <span class="string">'\t-c, --total \n'</span> +</span><br><span class="line">                  <span class="string">'\t--help'</span>)</span><br><span class="line">           .boolean([<span class="string">'c'</span>, <span class="string">'h'</span>, <span class="string">'count'</span>, <span class="string">'help'</span>])</span><br><span class="line">           .argv,</span><br><span class="line">    partial_size = <span class="number">0</span>,</span><br><span class="line">    default_unit = <span class="number">1024</span>,</span><br><span class="line">    paths = [],</span><br><span class="line">    unit = default_unit;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (<span class="built_in">require</span>.main !== <span class="built_in">module</span>) {</span><br><span class="line">  <span class="built_in">console</span>.error(<span class="string">'please run it as standalone app'</span>);</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (argv.help) {</span><br><span class="line">  <span class="built_in">require</span>(<span class="string">'optimist'</span>).showHelp();</span><br><span class="line">  process.exit(<span class="number">0</span>);</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">displaySize</span>(<span class="params">bytes</span>) </span>{</span><br><span class="line">  <span class="built_in">console</span>.log(bytes);</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">traversePath</span>(<span class="params">path, callback</span>) </span>{</span><br><span class="line">  <span class="keyword">var</span> stats, files;</span><br><span class="line"></span><br><span class="line">  stats = fs.lstatSync(path);</span><br><span class="line">  <span class="keyword">if</span> (stats.isFile()) {</span><br><span class="line">    callback(stats.size);</span><br><span class="line">  } <span class="keyword">else</span> {</span><br><span class="line">    files = fs.readdirSync(path);</span><br><span class="line">    files &amp;&amp; files.forEach(<span class="function"><span class="keyword">function</span>(<span class="params">file</span>) </span>{</span><br><span class="line">      traversePath(path + <span class="string">'/'</span> + file, callback);</span><br><span class="line">    });</span><br><span class="line">  }</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">collectSize</span>(<span class="params">bytes</span>) </span>{</span><br><span class="line">  partial_size += <span class="built_in">Math</span>.ceil(bytes/unit);</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (argv._.length === <span class="number">0</span>) {</span><br><span class="line">  paths.push(<span class="string">'.'</span>);</span><br><span class="line"></span><br><span class="line">} <span class="keyword">else</span> {</span><br><span class="line">  argv._.forEach(<span class="function"><span class="keyword">function</span>(<span class="params">path</span>) </span>{</span><br><span class="line">    paths.push(path);</span><br><span class="line">  });</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">paths.forEach(<span class="function"><span class="keyword">function</span>(<span class="params">path</span>) </span>{</span><br><span class="line">  traversePath(path, collectSize);</span><br><span class="line">  displaySize(partial_size);</span><br><span class="line">});</span><br></pre></td></tr></table></figure></p>
<p>异步版本：<br><figure class="highlight js"><figcaption><span>du-async</span><a href="/downloads/code/du-async.js">view raw</a></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/usr/bin/env node</span></span><br><span class="line"><span class="comment">// du clone</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> fs = <span class="built_in">require</span>(<span class="string">'fs'</span>),</span><br><span class="line">    util = <span class="built_in">require</span>(<span class="string">'util'</span>),</span><br><span class="line">    argv = <span class="built_in">require</span>(<span class="string">'optimist'</span>)</span><br><span class="line">           .usage(<span class="string">'Usage: $0 [OPTION]... [PATH]...\n'</span> +</span><br><span class="line">                  <span class="string">'\t-h, --human \n'</span> +</span><br><span class="line">                  <span class="string">'\t-c, --total \n'</span> +</span><br><span class="line">                  <span class="string">'\t--help'</span>)</span><br><span class="line">           .boolean([<span class="string">'c'</span>, <span class="string">'h'</span>, <span class="string">'count'</span>, <span class="string">'help'</span>])</span><br><span class="line">           .argv,</span><br><span class="line">    events = <span class="keyword">new</span> <span class="built_in">require</span>(<span class="string">'events'</span>),</span><br><span class="line">    emitter = <span class="keyword">new</span> events.EventEmitter(),</span><br><span class="line">    total_size = <span class="number">0</span>,</span><br><span class="line">    default_unit = <span class="number">1</span>,</span><br><span class="line">    paths = [],</span><br><span class="line">    unit = default_unit;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (<span class="built_in">require</span>.main !== <span class="built_in">module</span>) {</span><br><span class="line">  <span class="built_in">console</span>.error(<span class="string">'please run it as standalone app'</span>);</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (argv.help) {</span><br><span class="line">  <span class="built_in">require</span>(<span class="string">'optimist'</span>).showHelp();</span><br><span class="line">  process.exit(<span class="number">0</span>);</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">displaySize</span>(<span class="params"></span>) </span>{</span><br><span class="line">    <span class="built_in">console</span>.log(total_size);</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">traversePath</span>(<span class="params">path, callback</span>) </span>{</span><br><span class="line"></span><br><span class="line">  fs.lstat(path, <span class="function"><span class="keyword">function</span>(<span class="params">err, stats</span>) </span>{</span><br><span class="line">    <span class="keyword">if</span> (stats.isFile()) {</span><br><span class="line">      emitter.emit(<span class="string">'data'</span>, stats.size);</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">'%d\t%s'</span>, stats.size, path);</span><br><span class="line"></span><br><span class="line">    } <span class="keyword">else</span> {</span><br><span class="line">      fs.readdir(path, <span class="function"><span class="keyword">function</span>(<span class="params">err2, files</span>) </span>{</span><br><span class="line">        files &amp;&amp; files.forEach(<span class="function"><span class="keyword">function</span>(<span class="params">file</span>) </span>{</span><br><span class="line">                   traversePath(path + <span class="string">'/'</span> + file, callback);</span><br><span class="line">                 });</span><br><span class="line">      });</span><br><span class="line">    }</span><br><span class="line">  });</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">collectSize</span>(<span class="params">bytes</span>) </span>{</span><br><span class="line">  total_size += <span class="built_in">Math</span>.ceil(bytes/unit);</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">emitter.on(<span class="string">'data'</span>, collectSize);</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (argv._.length === <span class="number">0</span>) {</span><br><span class="line">  paths.push(<span class="string">'.'</span>);</span><br><span class="line"></span><br><span class="line">} <span class="keyword">else</span> {</span><br><span class="line">  argv._.forEach(<span class="function"><span class="keyword">function</span>(<span class="params">path</span>) </span>{</span><br><span class="line">    paths.push(path);</span><br><span class="line">  });</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">paths.forEach(<span class="function"><span class="keyword">function</span>(<span class="params">path</span>) </span>{</span><br><span class="line">  traversePath(path, collectSize);</span><br><span class="line">});</span><br><span class="line"></span><br><span class="line">process.on(<span class="string">'exit'</span>, displaySize);</span><br></pre></td></tr></table></figure><br>可以看出两个版本在结构上其实有很大的区别。在使用callback的异步方案中，我使用了<a href="http://nodemanual.org/latest/nodejs_ref_guide/eventemitter.html" target="_blank" rel="external">EventEmitter</a>，当然不是必须的，<br>然后在进程的<a href="http://nodemanual.org/latest/nodejs_ref_guide/process.html#process.event.exit" target="_blank" rel="external">exit事件</a>时，输出总大小。这里的问题是，这种方法我无法准确的以某个顺序输出参数列出的每一个路径的大小，<br>比如<br>    ./du.js dirA dirB dirC<br>如此来调用，就不能用exit事件去处理了，这是Node.js中异步编程的一个困难所在。<br>为了解决这种问题，有很多不同的方案。有一种模式叫promise，node实现<a href="https://github.com/kriszyp/node-promise" target="_blank" rel="external">node-promise</a>，<br>据说老版本的Node.js中提供了promise语义，后来被去除了，promise对我来说比较难理解，也是第一次接触，所以打算做更多的<br>探索再说。</p>

      
    </div>
    <footer>
      
        
        
      
      <div class="clearfix"></div>
    </footer>
  </div>
</article>




  <article class="post">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
        <time datetime="2012-04-21T16:29:00.000Z"><a href="/2012/04/22/2012-04-22-inventing-on-principle-inspires-a-lot/">2012-04-22</a></time>
      
      
  
    <h1 class="title"><a href="/2012/04/22/2012-04-22-inventing-on-principle-inspires-a-lot/">inventing on principle inspires a lot</a></h1>
  

    </header>
    <div class="entry">
      
        <p>前不久偶然在reddit上看到有人推荐一个Vimeo视频<a href="http://vimeo.com/36579366" target="_blank" rel="external">Inventing on principle</a>(如果看不了，<br>这里有<a href="http://v.youku.com/v_show/id_XMzUyOTIyNzg0.html" target="_blank" rel="external">youku</a>的），作者是Bret Victor。看名字其实<br>不太明白它要讲什么，所以下载后放着没看。后来一个晚上闲来无事，就翻出这个视频，<br>没想到彻底被作者的思想所折服。他表达了一种观点，就是当我们在进行创作的时候，应<br>该以一种交互式的可以立即反馈的方式去进行。他在视频中使用了几个软件开发中的例子，<br>这些例子太震撼了，他几乎发明了一种崭新的编程方式。<br>很多人都觉得<code>this is a new world to invent</code><br>有人说道：</p>
<blockquote>
<p>That’s already a good candidate for the technical talk of the year, if not the decade IMO.<br>Ok, I’m getting a bit too enthusiastic here but this is so inspiring.</p>
</blockquote>
<p>许多人受到巨大鼓舞和启发，在很短的时间里已经有很多基于Bret Victor的原则所创造的<br>原型出来，比如这个超酷的<a href="http://www.chris-granger.com/2012/04/12/light-table---a-new-ide-concept/" target="_blank" rel="external">Light Table</a>，完全颠覆你对IDE的概念。<a href="http://hacks.mozilla.org/2012/04/bret-victors-inventing-on-principle-and-a-few-things-it-inspired/" target="_blank" rel="external">这里</a>还谈到了一个<br>叫<a href="http://www.frogatto.com/" target="_blank" rel="external">Frogatto and Friends</a>的游戏，完全基于Bret的原则，还有<br>mozilla自己的一个实验性质的编辑器<a href="http://neonux.github.com/LiveScratchpad/" target="_blank" rel="external">Live Scratchpad</a>。</p>
<p>5月9号更新:</p>
<p>这里又有一个叫<a href="http://enja.org/2012/05/07/floating-down-a-tributary/" target="_blank" rel="external">Tributary</a>的，作者称为响应式可视编程，给的例子倒是挺有意思。另外听说<a href="http://www.chris-granger.com/2012/04/12/light-table---a-new-ide-concept/" target="_blank" rel="external">Light Table</a><br>在<a href="http://webdev360.com/light-table-hits-3-000-backers-on-path-to-more-than-475-000-42400.html" target="_blank" rel="external">kickstater</a>上受到热捧啊。</p>
<p>我强烈推荐大家看看这个视频，也许能得到不少启发，英语不好也没关系，光看看演示你也<br>能感受到那种强烈的冲击。</p>

      
    </div>
    <footer>
      
        
        
      
      <div class="clearfix"></div>
    </footer>
  </div>
</article>




  <article class="post">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
        <time datetime="2012-04-21T09:06:00.000Z"><a href="/2012/04/21/2012-04-21-nodejs-notes-from-introduction-to-nodejs/">2012-04-21</a></time>
      
      
  
    <h1 class="title"><a href="/2012/04/21/2012-04-21-nodejs-notes-from-introduction-to-nodejs/">Nodejs: notes from introduction to Nodejs</a></h1>
  

    </header>
    <div class="entry">
      
        <p>I just watched <a href="http://www.youtube.com/watch?v=jo_B4LTHi3I&amp;hd=1" target="_blank" rel="external">Introduction to Node.js with Ryan Dahl</a>, here are some quick notes.</p>
<ul>
<li><p>There are no dom and window global object, cause it’s not in web browser environment.<br>Nodejs is used to do server side javascript, and as it promise do web the right way.<br>It basically provides a common api and a way to communicate with system. such as get<br>pid by accessing global object process.</p>
</li>
<li><p>old setTimeout is provided. so anyone who is familiar with browser side js should be feel<br>comfortable. node implicitly starts the event loop after all things setup. so </p>
</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/usr/bin/env node</span></span><br><span class="line"><span class="comment">// simple hello-world.js demo</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">'Hello'</span>);</span><br><span class="line">setTimeout(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'World'</span>);</span><br><span class="line">&#125;, <span class="number">2000</span>);</span><br></pre></td></tr></table></figure>
<p>when you call it with <code>node hello-world.js</code>, it ends right after two seconds. Node knows when<br>to drop out once all callbacks and all timouts get done.</p>
<ul>
<li>write a simple http server with Node is just like something below:<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/usr/bin/env node</span></span><br><span class="line"><span class="comment">// simple hello-http.js demo</span></span><br><span class="line"><span class="keyword">var</span> http = <span class="built_in">require</span>(<span class="string">'http'</span>);</span><br><span class="line">http.createServer(<span class="function"><span class="keyword">function</span>(<span class="params">req, resp</span>) </span>&#123;</span><br><span class="line">    resp.writeHead(<span class="number">200</span>, &#123;<span class="string">'content-type'</span>: <span class="string">'text/plain'</span>&#125;);</span><br><span class="line">    resp.end(<span class="string">"Hello, World\n"</span>);</span><br><span class="line">&#125;).listen(<span class="number">8000</span>);</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p>start it with <code>node hello-http.js</code> and use <code>curl -i http://localhost:8000/</code>, you will get response<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">HTTP/1.1 200 OK</span><br><span class="line">content-type: text/plain</span><br><span class="line">Connection: keep-alive</span><br><span class="line">Transfer-Encoding: chunked</span><br><span class="line"></span><br><span class="line">Hello, World</span><br></pre></td></tr></table></figure></p>
<p>Notice that header include <code>Transfer-Encoding: chunked</code>, it means streamming which makes it possible to<br>encode chunks to send a variable length respone.</p>
<ul>
<li>then here comes a simple chat server,  and I rewrite it a little bit but remains the spirit.<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/usr/bin/env node</span></span><br><span class="line"><span class="keyword">var</span> net = <span class="built_in">require</span>(<span class="string">'net'</span>);</span><br><span class="line"><span class="keyword">var</span> connections = []</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">broadcast</span>(<span class="params">msg, skip</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; connections.length; i += <span class="number">1</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span> (connections[i] !== skip)</span><br><span class="line">            connections[i].write(msg);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">net.createServer(<span class="function"><span class="keyword">function</span>(<span class="params">conn</span>) </span>&#123;</span><br><span class="line">    connections.push(conn);</span><br><span class="line"></span><br><span class="line">    conn.on(<span class="string">'data'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">chunk</span>) </span>&#123;</span><br><span class="line">        broadcast(chunk, conn);</span><br><span class="line">    &#125;)</span><br><span class="line">    .on(<span class="string">'end'</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        connections.splice(connections.indexOf(conn),<span class="number">1</span>);</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">&#125;).listen(<span class="number">8000</span>);</span><br></pre></td></tr></table></figure>
</li>
</ul>

      
    </div>
    <footer>
      
        
        
      
      <div class="clearfix"></div>
    </footer>
  </div>
</article>




  <article class="post">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
        <time datetime="2012-04-17T03:28:00.000Z"><a href="/2012/04/17/2012-04-17-nodejs-first-impression/">2012-04-17</a></time>
      
      
  
    <h1 class="title"><a href="/2012/04/17/2012-04-17-nodejs-first-impression/">Nodejs: first impression</a></h1>
  

    </header>
    <div class="entry">
      
        <p>Nodejs is incredible, especially for a front-end developer.  what is Node,<br>I just quote from <a href="http://nodejs.org" target="_blank" rel="external">website</a>:</p>
<blockquote>
<p>Node.js is a platform built on Chrome’s JavaScript runtime for easily<br>building fast, scalable network applications. Node.js uses an<br>event-driven, non-blocking I/O model that makes it lightweight and<br>efficient, perfect for data-intensive real-time applications that run<br>across distributed devices.</p>
</blockquote>
<p>After some digging, I wrote a simple wc clone, here is it:<br><figure class="highlight js"><figcaption><span>wc.js</span><a href="/downloads/code/wc.js">view raw</a></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/usr/bin/env node</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span><br><span class="line"> * simple wc clone written in JS.</span><br><span class="line"> * need optimist for options parsing.</span><br><span class="line"> * Sian Cao &lt;yinshuiboy@gmail.com&gt;</span><br><span class="line"> */</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> argv = <span class="built_in">require</span>(<span class="string">'optimist'</span>)</span><br><span class="line">           .usage(<span class="string">'Usage: $0 [OPTION]... [FILE]...\n'</span> +</span><br><span class="line">                  <span class="string">'  -c count chars\n'</span> +</span><br><span class="line">                  <span class="string">'  -l count lines\n'</span> +</span><br><span class="line">                  <span class="string">'  -w count words'</span>)</span><br><span class="line">           .boolean([<span class="string">'c'</span>, <span class="string">'l'</span>, <span class="string">'w'</span>, <span class="string">'h'</span>])</span><br><span class="line">           .argv,</span><br><span class="line">    fs = <span class="built_in">require</span>(<span class="string">'fs'</span>),</span><br><span class="line">    util = <span class="built_in">require</span>(<span class="string">'util'</span>);</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">processChunk</span>(<span class="params">chunk, collects</span>) </span>{</span><br><span class="line">    <span class="keyword">var</span> i = <span class="number">0</span>, inword = <span class="literal">false</span>;</span><br><span class="line">    <span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; chunk.length; i += <span class="number">1</span>) {</span><br><span class="line">      collects.nr_chars += <span class="number">1</span>;</span><br><span class="line">      <span class="keyword">if</span> (<span class="regexp">/\w/</span>.test(chunk[i])) {</span><br><span class="line">        <span class="keyword">if</span> (!inword) {</span><br><span class="line">          inword = <span class="literal">true</span>;</span><br><span class="line">          collects.nr_words += <span class="number">1</span>;</span><br><span class="line">        }</span><br><span class="line">      } <span class="keyword">else</span> {</span><br><span class="line">        inword = <span class="literal">false</span>;</span><br><span class="line">      }</span><br><span class="line"></span><br><span class="line">      <span class="keyword">if</span> (chunk[i] == <span class="string">'\n'</span>) {</span><br><span class="line">        inword = <span class="literal">true</span>;</span><br><span class="line">        collects.nr_lines += <span class="number">1</span>;</span><br><span class="line">      }</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">printCounts</span>(<span class="params">collects</span>) </span>{</span><br><span class="line">  <span class="keyword">if</span> (argv.l) {</span><br><span class="line">    util.print(collects.nr_lines + <span class="string">' '</span>);</span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (argv.w) {</span><br><span class="line">    util.print(collects.nr_words + <span class="string">' '</span>);</span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (argv.c) {</span><br><span class="line">    util.print(collects.nr_chars + <span class="string">' '</span>);</span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (!(argv.l || argv.c || argv.w)) {</span><br><span class="line">    util.print(collects.nr_lines + <span class="string">' '</span> + collects.nr_words + <span class="string">' '</span> + collects.nr_chars);</span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  util.print(<span class="string">'\n'</span>);</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (argv.h || argv.help) {</span><br><span class="line">  <span class="built_in">require</span>(<span class="string">'optimist'</span>).showHelp();</span><br><span class="line">  process.exit(<span class="number">0</span>);</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (argv._.length &gt; <span class="number">0</span>) {</span><br><span class="line">  argv._.forEach(<span class="function"><span class="keyword">function</span>(<span class="params">file</span>) </span>{</span><br><span class="line">    <span class="keyword">var</span> collects = {</span><br><span class="line">      nr_lines: <span class="number">0</span>,</span><br><span class="line">      nr_words: <span class="number">0</span>,</span><br><span class="line">      nr_chars: <span class="number">0</span></span><br><span class="line">    };</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> fstat = fs.statSync(file);</span><br><span class="line">    <span class="keyword">if</span> (fstat.isFile()) {</span><br><span class="line">      fs.createReadStream(file, {encoding: <span class="string">'utf8'</span>}).on(<span class="string">'data'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">chunk</span>) </span>{</span><br><span class="line">        processChunk(chunk, collects);</span><br><span class="line"></span><br><span class="line">      }).on(<span class="string">'end'</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>{</span><br><span class="line">        printCounts(collects);</span><br><span class="line">      });</span><br><span class="line">    }</span><br><span class="line">  });</span><br><span class="line"></span><br><span class="line">} <span class="keyword">else</span> {</span><br><span class="line">  (<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>{</span><br><span class="line">    <span class="keyword">var</span> collects = {</span><br><span class="line">      nr_lines: <span class="number">0</span>,</span><br><span class="line">      nr_words: <span class="number">0</span>,</span><br><span class="line">      nr_chars: <span class="number">0</span></span><br><span class="line">    };</span><br><span class="line"></span><br><span class="line">    process.stdin.resume();</span><br><span class="line">    process.stdin.setEncoding(<span class="string">'utf8'</span>);</span><br><span class="line"></span><br><span class="line">    process.stdin.on(<span class="string">'data'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">chunk</span>) </span>{</span><br><span class="line">      processChunk(chunk, collects);</span><br><span class="line">    });</span><br><span class="line"></span><br><span class="line">    process.stdin.on(<span class="string">'end'</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>{</span><br><span class="line">      printCounts(collects);</span><br><span class="line">    });</span><br><span class="line">   })();</span><br><span class="line">}</span><br></pre></td></tr></table></figure></p>
<p>You need to install optimist <code>npm install optimist</code> to run this file.</p>
<p><strong>update</strong>:<br>a really great sum-up of resources for you to <a href="http://awebfactory.com.ar/node/470" target="_blank" rel="external">dive into node</a></p>

      
    </div>
    <footer>
      
        
        
      
      <div class="clearfix"></div>
    </footer>
  </div>
</article>




  <article class="post">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
        <time datetime="2012-04-13T02:23:00.000Z"><a href="/2012/04/13/2012-04-13-mosh-is-awesome/">2012-04-13</a></time>
      
      
  
    <h1 class="title"><a href="/2012/04/13/2012-04-13-mosh-is-awesome/">mosh is awesome</a></h1>
  

    </header>
    <div class="entry">
      
        <p>I occasionally came across <a href="https://github.com/keithw/mosh" target="_blank" rel="external">mosh</a> yesterday, and try it today, and found it<br>really awesome. It does what it promised </p>
<blockquote>
<p>to keeps the session alive if the client goes to sleep and wakes up later,<br>or temporarily loses its Internet connection.</p>
</blockquote>
<p>that is power enough to draw your mind and it also supports <em>roaming</em></p>
<blockquote>
<p>Mosh allows the client and server to “roam” and change IP addresses,<br>while keeping the connection alive. </p>
</blockquote>
<p>I just get a chance to try that cool feature some days ago. My wired network accidentally<br>losted, and my wireless connection took in charge a few seconds later, and as wireless got<br>connected, my mosh tunnel reestablished. </p>
<p>If you see a log <code>mosh requires a UTF-8 locale</code> when running mosh, it means<br>there is something wrong with your ssh config. try this:<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mosh --server=<span class="string">"LANG=<span class="variable">$LANG</span> mosh-server"</span> user@ip [your cmd]</span><br></pre></td></tr></table></figure></p>
<p>or FYI, see this <a href="https://github.com/keithw/mosh/issues/98" target="_blank" rel="external">issue</a></p>
<p>If you ever use tmux or gnu screen, here comes the power<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mosh sonald@remote-server tmux attach-session</span><br></pre></td></tr></table></figure></p>
<p>This saves me a lot of trouble.</p>

      
    </div>
    <footer>
      
        
        
      
      <div class="clearfix"></div>
    </footer>
  </div>
</article>




  <article class="post">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
        <time datetime="2012-04-09T10:04:00.000Z"><a href="/2012/04/09/2012-04-09-nepomuk-and-fulltext-indexing/">2012-04-09</a></time>
      
      
  
    <h1 class="title"><a href="/2012/04/09/2012-04-09-nepomuk-and-fulltext-indexing/">nepomuk and fulltext indexing</a></h1>
  

    </header>
    <div class="entry">
      
        <p>Just a reminder of some confusing things about Nepomuk in KDE4.</p>
<p>A few of googling tell that it supports fulltext-indexing of variant types of files,<br>including pdf file. Unfortunately I failed to witness it in my KDE4 env. So I dig more<br>and get some info. </p>
<p>First newer KDE4 version uses virtuoso to do indexing work instead of old strigi, and<br>for pdf-indexing to work, you may need to <a href="https://bugs.kde.org/show_bug.cgi?id=231936" target="_blank" rel="external">install pdftotext</a>.  According to <a href="http://trueg.wordpress.com/2011/11/02/kde-4-7-3-the-first-nepomuk-stability-release/" target="_blank" rel="external">this post</a>,<br>pdf should be supported. To check if a file has been indexed, go to info panel in Dolphin and<br>see if there is a ‘has hash’ property. and here is an <a href="http://trueg.wordpress.com/2011/09/22/about-strigi-soprano-virtuoso-clucene-and-libstreamanalyzer/" target="_blank" rel="external">explaination</a> of some parts related to<br>Nepomuk infrastructure.</p>
<p>For trouble-shooting, there are some ways to try(see <a href="http://userbase.kde.org/Nepomuk" target="_blank" rel="external">Nepomuk</a>, <a href="http://trueg.wordpress.com/2011/12/05/manually-forcing-the-re-indexing-of-folders-is-easy/" target="_blank" rel="external">re-indexing</a>),<br>here are some quick excerpts.</p>
<p>index a file manually from console:<br>    nepomukindexer /path/to/file</p>
<p>call dbus service to re-indexing a folder(only work for KDE 4.8):<br>    qdbus org.kde.nepomuk.services.nepomukfileindexer /nepomukfileindexer org.kde.nepomuk.FileIndexer.indexFolder afolder 0 1</p>

      
    </div>
    <footer>
      
        
        
      
      <div class="clearfix"></div>
    </footer>
  </div>
</article>




  <article class="post">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
        <time datetime="2012-03-29T11:36:00.000Z"><a href="/2012/03/29/2012-03-29-octopress-with-twitter-bootstrap/">2012-03-29</a></time>
      
      
  
    <h1 class="title"><a href="/2012/03/29/2012-03-29-octopress-with-twitter-bootstrap/">octopress with twitter bootstrap</a></h1>
  

    </header>
    <div class="entry">
      
        <p>哈哈，刚才找到一个整合了twitter bootstrap的octopress的主题，太帅了，立马换上。<br>细节还需要调整，不过比默认的主题方便多了。猛击<a href="https://github.com/bkutil/bootstrap-theme" target="_blank" rel="external">这里</a>。<br>当然如果你用的是原生的jekyll，可以参考<a href="http://brizzled.clapper.org/blog/2012/03/05/using-twitter-bootstrap-with-jekyll/" target="_blank" rel="external">这里</a>。<br>bootstrap是twitter的一个轻量级的前端框架，使用非常方便，去这里<a href="http://twitter.github.com/bootstrap/index.html" target="_blank" rel="external">可以</a>看看效果。</p>

      
    </div>
    <footer>
      
        
        
      
      <div class="clearfix"></div>
    </footer>
  </div>
</article>




  <article class="post">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
        <time datetime="2012-03-29T11:08:00.000Z"><a href="/2012/03/29/2012-03-29-8-puzzle-problem/">2012-03-29</a></time>
      
      
  
    <h1 class="title"><a href="/2012/03/29/2012-03-29-8-puzzle-problem/">8 puzzle problem</a></h1>
  

    </header>
    <div class="entry">
      
        <p>竟然还有一个<a href="http://www.8puzzle.com" target="_blank" rel="external">网站</a>专门研究8数码问题，记录一下。</p>
<p>And here are some useful websites related to this problem, most of them<br>talked about path finding problems:</p>
<ul>
<li><a href="http://www.heyes-jones.com/astar.html" target="_blank" rel="external">A* algorithm tutorial</a></li>
<li><a href="http://www.policyalmanac.org/games/aStarTutorial.htm" target="_blank" rel="external">A* Pathfinding for Beginners</a></li>
<li><a href="http://harablog.wordpress.com/2011/09/07/jump-point-search/" target="_blank" rel="external">Jump Point Search</a></li>
<li><a href="http://theory.stanford.edu/~amitp/GameProgramming" target="_blank" rel="external">Pathfinding</a></li>
</ul>

      
    </div>
    <footer>
      
        
        
      
      <div class="clearfix"></div>
    </footer>
  </div>
</article>




  <article class="post">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
        <time datetime="2012-03-28T05:29:00.000Z"><a href="/2012/03/28/2012-03-28-zsh-gem-1/">2012-03-28</a></time>
      
      
  
    <h1 class="title"><a href="/2012/03/28/2012-03-28-zsh-gem-1/">zsh gem(1)</a></h1>
  

    </header>
    <div class="entry">
      
        <p>zsh is my favorate shell, super powerful. there are a lot of blogs about it, and I recommend<br>a book <a href="http://www.bash2zsh.com/" target="_blank" rel="external">From bash to z shell</a>, and the site also contains some wonderful references.</p>
<p>Here I just wanna show some cool quick snippets of what zsh capable of, just for fun.<br>So guess what this does?</p>
<figure class="highlight sh"><figcaption><span>compare_dirs.sh</span><a href="/downloads/code/zsh/compare_dirs.sh">view raw</a></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/zsh</span><br><span class="line"></span></span><br><span class="line"><span class="keyword">if</span> [ <span class="variable">$#</span> <span class="_">-lt</span> 2 ]; <span class="keyword">then</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">"need src dest dir to compare"</span></span><br><span class="line">    <span class="built_in">exit</span> 1</span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">pushd</span> <span class="variable">$1</span></span><br><span class="line"><span class="built_in">print</span> <span class="_">-l</span> *(e:<span class="string">'[[ ! -e $2/$REPLY ]]'</span>:) 2&gt;/dev/null</span><br><span class="line"><span class="built_in">popd</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#pushd $2</span></span><br><span class="line"><span class="comment">#print -l *(e:'[[ ! -e $1/$REPLY ]]':) 2&gt;/dev/null</span></span><br><span class="line"><span class="comment">#popd</span></span><br></pre></td></tr></table></figure>

      
    </div>
    <footer>
      
        
        
      
      <div class="clearfix"></div>
    </footer>
  </div>
</article>





<nav id="pagination">
  
    <a href="/page/3/" class="alignleft prev">Vorherige Seite</a>
  
  
    <a href="/page/5/" class="alignright next">Nächste Seite</a>
  
  <div class="clearfix"></div>
</nav></div></div>
    <aside id="sidebar" class="alignright">
  <div class="search">
  <form action="//google.com/search" method="get" accept-charset="utf-8">
    <input type="search" name="q" results="0" placeholder="Suche">
    <input type="hidden" name="q" value="site:sonald.me">
  </form>
</div>

  

  
<div class="widget tag">
  <h3 class="title">Tags</h3>
  <ul class="entry">
  
    <li><a href="/tags/algorithm/">algorithm</a><small>13</small></li>
  
    <li><a href="/tags/android/">android</a><small>1</small></li>
  
    <li><a href="/tags/c/">c</a><small>1</small></li>
  
    <li><a href="/tags/emacs/">emacs</a><small>3</small></li>
  
    <li><a href="/tags/iterm2/">iterm2</a><small>2</small></li>
  
    <li><a href="/tags/javascript/">javascript</a><small>4</small></li>
  
    <li><a href="/tags/map/">map</a><small>1</small></li>
  
    <li><a href="/tags/mutter/">mutter</a><small>1</small></li>
  
    <li><a href="/tags/nepomuk/">nepomuk</a><small>1</small></li>
  
    <li><a href="/tags/nodejs/">nodejs</a><small>6</small></li>
  
    <li><a href="/tags/objc/">objc</a><small>2</small></li>
  
    <li><a href="/tags/octopress/">octopress</a><small>1</small></li>
  
    <li><a href="/tags/os/">os</a><small>1</small></li>
  
    <li><a href="/tags/performance/">performance</a><small>1</small></li>
  
    <li><a href="/tags/principle/">principle</a><small>1</small></li>
  
    <li><a href="/tags/programming/">programming</a><small>1</small></li>
  
    <li><a href="/tags/rails/">rails</a><small>1</small></li>
  
    <li><a href="/tags/regex/">regex</a><small>1</small></li>
  
    <li><a href="/tags/ruby/">ruby</a><small>1</small></li>
  
    <li><a href="/tags/thought/">thought</a><small>1</small></li>
  
    <li><a href="/tags/tip/">tip</a><small>6</small></li>
  
    <li><a href="/tags/utils/">utils</a><small>1</small></li>
  
    <li><a href="/tags/web/">web</a><small>2</small></li>
  
    <li><a href="/tags/wm/">wm</a><small>1</small></li>
  
    <li><a href="/tags/zsh/">zsh</a><small>1</small></li>
  
  </ul>
</div>

</aside>
    <div class="clearfix"></div>
  </div>
  <footer id="footer" class="inner"><div class="alignleft">
  
  &copy; 2016 Sian Cao
  
</div>
<div class="clearfix"></div></footer>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>
<script src="/js/jquery.imagesloaded.min.js"></script>
<script src="/js/gallery.js"></script>




<link rel="stylesheet" href="/fancybox/jquery.fancybox.css" media="screen" type="text/css">
<script src="/fancybox/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
(function($){
  $('.fancybox').fancybox();
})(jQuery);
</script>

</body>
</html>
